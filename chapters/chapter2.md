
# üéì Kubernetes Day 2: The Commander (Scheduling & Node Management)

‡πÉ‡∏ô‡∏ö‡∏ó‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° "‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà" ‡∏Ç‡∏≠‡∏á Pods (Scheduling) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Node ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô Cluster

---

## üè∑Ô∏è 1. Node Labels (‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏¢‡∏®‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)
**Labels** ‡∏Ñ‡∏∑‡∏≠‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Node ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ (‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏µ GPU, ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á SSD, ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏ã‡∏ô‡πÑ‡∏´‡∏ô) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Scheduler ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å

### üõ†Ô∏è ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Labels (Basic Commands)

| Action | Command | Example |
| :--- | :--- | :--- |
| **‡∏î‡∏π Label ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** | `kubectl get nodes --show-labels` | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Node ‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏á |
| **‡∏ï‡∏¥‡∏î Label ‡πÉ‡∏´‡∏°‡πà** | `kubectl label nodes <node> <key>=<value>` | `kubectl label nodes colima hardware=gpu` |
| **‡πÅ‡∏Å‡πâ Label ‡πÄ‡∏î‡∏¥‡∏°** | ‡πÄ‡∏ï‡∏¥‡∏° `--overwrite` ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ | `kubectl label nodes colima hardware=quantum --overwrite` |
| **‡∏•‡∏ö Label** | ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏ö `-` ‡∏´‡∏•‡∏±‡∏á Key | `kubectl label nodes colima hardware-` |

---

## üéØ 2. Pod Scheduling (‡∏™‡∏±‡πà‡∏á Pod ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÅ‡∏õ‡∏∞‡∏õ‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ Node ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á Pod ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡∏•‡∏á Node ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ 2 ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏•‡∏±‡∏Å:

### A. nodeSelector (‡πÄ‡∏ú‡∏î‡πá‡∏à‡∏Å‡∏≤‡∏£/Strict) üëÆ‚Äç‚ôÇÔ∏è
‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ß‡πà‡∏≤ **"‡∏ï‡πâ‡∏≠‡∏á"** ‡πÑ‡∏õ‡∏•‡∏á Node ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
* **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:** ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤ Node ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Pod ‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ `Pending` ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: gpu-app
spec:
  containers:
  - name: nginx
    image: nginx:alpine
  # --- ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏ô‡∏î ---
  nodeSelector:
    hardware: gpu  # ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢ hardware=gpu ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

```

### B. Node Affinity (‡∏ô‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï/Flexible) ü§ù

‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏Å‡∏ß‡πà‡∏≤ `nodeSelector` ‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ 2 ‡∏£‡∏∞‡∏î‡∏±‡∏ö:

1. **required:** (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ) ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô nodeSelector ‡πÄ‡∏õ‡πä‡∏∞
2. **preferred:** (‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ) ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏Å‡πá‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Pending

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: soft-app
spec:
  containers:
  - name: nginx
    image: nginx:alpine
  affinity:
    nodeAffinity:
      # ‡πÉ‡∏ä‡πâ‡πÅ‡∏ö‡∏ö preferred (‡∏ä‡∏≠‡∏ö‡∏ô‡∏∞ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 1
        preference:
          matchExpressions:
          - key: hardware
            operator: In
            values:
            - quantum # ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ quantum ‡∏Å‡πá‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ

```

---

## üöß 3. Taints & Tolerations (‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ß‡∏á‡∏´‡πâ‡∏≤‡∏°)

‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **"‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏≠‡∏Å"** ‡∏´‡∏£‡∏∑‡∏≠ Node ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á (Repulsion)

* **Taint (‡πÅ‡∏°‡πà‡∏Å‡∏∏‡∏ç‡πÅ‡∏à üîí):** ‡πÅ‡∏õ‡∏∞‡∏ó‡∏µ‡πà **Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≤‡∏° Pod ‡πÄ‡∏Ç‡πâ‡∏≤
* **Toleration (‡∏•‡∏π‡∏Å‡∏Å‡∏∏‡∏ç‡πÅ‡∏à üóùÔ∏è):** ‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà **Pod** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏£‡∏±‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ß‡∏≤‡∏á‡∏¢‡∏≤ Node (Taint)

```bash
# ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: kubectl taint nodes <node-name> key=value:Effect
kubectl taint nodes colima security=high:NoSchedule

```

**Effect Types:**

* `NoSchedule`: ‡∏´‡πâ‡∏≤‡∏° Pod ‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤‡∏•‡∏á (Pod ‡πÄ‡∏Å‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ)
* `NoExecute`: ‡πÑ‡∏•‡πà Pod ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ï‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ! (‡πÇ‡∏´‡∏î‡∏™‡∏∏‡∏î)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Pod ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ï‡∏£‡∏ú‡πà‡∏≤‡∏ô (Toleration)

‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏ key, value ‡πÅ‡∏•‡∏∞ effect ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÅ‡∏°‡πà‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Ñ‡πÑ‡∏ß‡πâ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: authorized-app
spec:
  containers:
  - name: nginx
    image: nginx:alpine
  # --- ‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ---
  tolerations:
  - key: "security"      # ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏∏‡∏ç‡πÅ‡∏à
    operator: "Equal"
    value: "high"        # ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏∏‡∏ç‡πÅ‡∏à
    effect: "NoSchedule" # ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏°‡πà‡∏Å‡∏∏‡∏ç‡πÅ‡∏à

```

---

## üïµÔ∏è‚Äç‚ôÇÔ∏è 4. Troubleshooting (‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)

‡πÄ‡∏°‡∏∑‡πà‡∏≠ Pod ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏° Running (‡∏ï‡∏¥‡∏î Pending) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:

1. **‡∏î‡∏π‡∏ß‡πà‡∏≤ Pod ‡πÑ‡∏õ‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô:**
```bash
kubectl get pod <pod-name> -o wide

```


*(‡∏î‡∏π‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå NODE ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô `<none>` ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏•‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)*
2. **‡∏ñ‡∏≤‡∏° Scheduler ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡πÑ‡∏°‡πà‡∏à‡∏±‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å):**
```bash
kubectl describe pod <pod-name>

```


*(‡∏î‡∏π‡∏™‡πà‡∏ß‡∏ô **Events** ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î ‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ü‡πâ‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô `FailedScheduling`, `node(s) didn't match node selector`, ‡∏´‡∏£‡∏∑‡∏≠ `untolerated taint`)*

---

*Tags: #kubernetes #scheduling #affinity #taints #devops*

```

```